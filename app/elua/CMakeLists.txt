if(CONFIG_BUILD_LUA)
	add_definitions(-DLUA_SCRIPT_ADDR=${CONFIG_LUA_FLASH_OFFSET} -DLUA_SCRIPT_SIZE=${CONFIG_LUA_FLASH_SIZE} -DLUA_RES_BASE=0 -DLUA_RES_SIZE=0 -DCUSTOMER_FILE_OFFSET=0 -DLUA_SAVE_LAST_ERROR -DLUA_OPTIMIZE_MEMORY=0 -DDLMALLOC_DEFAULT_GRANULARITY=32768 -DUSE_DLMALLOC -DUSE_DL_PREFIX -DUSE_DLMALLOC_AS_LUA_ALLOCF)
	add_definitions(-DMUXUSE_DLMALLOC_MEMORY_AS_LUA_SCRIPT_LOAD -DBUILD_CON_GENERIC -DLUA_USE_MTK_NUCLEUS)
	add_definitions(-DLUA_ICONV_LIB -DLUA_ZLIB_LIB -DLUA_OS_LIB -DLUA_IO_LIB -DAM_LUA_UNCOMPRESS_SCRIPT_TABLE_ACESS_SUPPORT)
 	add_definitions(-DLUA_FILE_LOAD_SUPPORT -DAM_LZMA_SUPPORT -DAM_ZLIB_SUPPORT -DLUA_AUDIO_LIB -DLUA_TTY_SUPPORT -DLUA_USE_NEWLIBC -DLUA_DISP_LIB -DLUA_DISP_SUPPORT_HZ -DAM_LPNG_SUPPORT -DAM_FONTHZ_TWO_LEVEL_SUPPORT)
	# add_definitions(-DLUA_FILE_LOAD_SUPPORT -DAM_CRYPTO_SUPPORT -DAM_LZMA_SUPPORT -DAM_ZLIB_SUPPORT -DLUA_AUDIO_LIB -DLUA_TTY_SUPPORT -DLUA_USE_NEWLIBC -DLUA_DISP_LIB -DLUA_DISP_SUPPORT_HZ -DAM_FONTHZ_TWO_LEVEL_SUPPORT)
	add_definitions(-DAM_VER=\"TEST\" -DLUA_DEBUG_LIB -DAM_PBC_SUPPORT )
	# add_definitions(-DLUA_SOCKET_SSL_SUPPORT)
	# add_definitions(-DAM_CRYPTO_SUPPORT)

#+zhuwangbin add CONFIG_AM_CAMERA_SUPPORT CONFIG_AM_JPG_SUPPORT CONFIG_AM_QRENCODE_SUPPORT
set(CONFIG_AM_CAMERA_SUPPORT ON)
if (CONFIG_AM_CAMERA_SUPPORT)
	message("CAMERA support")
	add_definitions(-DAM_LUA_CAMERA_SUPPORT)
endif()

set(CONFIG_AM_JPG_SUPPORT ON)
if(CONFIG_AM_JPG_SUPPORT)
	message("JPG support")
	add_definitions(-DAM_JPG_SUPPORT)
endif()	

set(CONFIG_AM_QRENCODE_SUPPORT ON)
if(CONFIG_AM_QRENCODE_SUPPORT)
	message("QRENCODE support")
	add_definitions(-DLUA_QRENCODE_SUPPORT)
endif()
#-zhuwangbin add CONFIG_AM_CAMERA_SUPPORT CONFIG_AM_JPG_SUPPORT CONFIG_AM_QRENCODE_SUPPORT
#+wangyuan add CONFIG_FS_MOUNT_SDCARD
if(CONFIG_FS_MOUNT_SDCARD)
	message("SDCARD support")
	add_definitions(-DLUA_SDCARD_SUPPORT)
endif()
#-wangyuan add CONFIG_FS_MOUNT_SDCARD

	add_subdirectory_if_exist(platform)
    add_subdirectory_if_exist(cust_dll)
	add_subdirectory_if_exist(lib)
	add_subdirectory_if_exist(modules)
	add_subdirectory_if_exist(newlib)
	add_subdirectory_if_exist(res)
	add_subdirectory_if_exist(shell)
	add_subdirectory_if_exist(lua)
endif()
